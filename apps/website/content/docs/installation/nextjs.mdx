# Installation: Next.js + Content Collections + Prose UI

## Create a new project and install dependencies

Start by creating a Next.js project, choosing defaults in the prompts.

```bash title="Create a new Next.js project"
npx create-next-app@latest
```

## Set up MDX rendering with Content Collections

[Content Collections](https://www.content-collections.dev/docs/quickstart/next) is a library that will help us to keep our mdx content organized, and will render our MDX files.

Follow [Content Collections Next.js](https://www.content-collections.dev/docs/quickstart/next) and [MDX guides](https://www.content-collections.dev/docs/content/mdx) to set up your project.

<Callout variant="note">
  You can set up Prose UI with `next/mdx` as well. But we're going to use Content Collections library in this example because it will help us keep our Markdown files organized in a single folder, and provide a better developer experience.&#x20;
</Callout>

## Set up Prose UI

Install dependencies

```bash
pnpm add @prose-ui/core @prose-ui/next @prose-ui/style
```

Import styles into your `globals.css`.

```css
@import "@prose-ui/style/prose-ui.css";
@import "@prose-ui/style/katex.min.css";
```

In your `content-collections.ts` initialize and pass remarkPlugins to the MDX compiler.

```typescript title="content-collections.ts"
import { remarkPlugins } from '@prose-ui/core'


const content = await compileMDX(ctx, page, {
   remarkPlugins: remarkPlugins(),
})
```

In your page.tsx where you render your Markdown pass Prose UI `mdxComponents` into the MDXContent, and wrap the content into a tag with a `prose-ui` css class.

```typescript title="page.tsx"
import { mdxComponents } from '@prose-ui/next'

<article className='prose-ui'>
   <MDXContent code={page.content} components={mdxComponents} />
</article>
```









## Old

Create an `mdx-components.tsx` file in the root of your project. This file will be used to override the default components used by MDX.

```tsx title="mdx-components.tsx" showLineNumbers
import { mdxComponents } from "@prose-ui/next";
import type { MDXComponents } from "mdx/types";

export function useMDXComponents(components: MDXComponents): MDXComponents {
  return {
    ...components,
    ...mdxComponents,
  };
}
```

```tsx title="mdx-components.tsx (generic React)"
import { mdxComponents } from "@prose-ui/react";
import type { MDXComponents } from "mdx/types";

export function useMDXComponents(components: MDXComponents): MDXComponents {
  return {
    ...components,
    ...mdxComponents,
  };
}
```

## Set up MDX rendering

Configure your project to use MDX with Prose UI by modifying your next.config.ts in the following way:

```typescript title="next.config.ts"
import createMDX from "@next/mdx";
import { remarkPlugins } from "@prose-ui/core";

/** @type {import('next').NextConfig} */
const nextConfig = {
  pageExtensions: ["js", "jsx", "md", "mdx", "ts", "tsx"],
};

const withMDX = createMDX({
  options: {
    remarkPlugins: remarkPlugins(),
  },
});

export default withMDX(nextConfig);
```

## Adjust the layout

Go to your `app/layout.tsx` and replace the content it returns with the code below to ensure that your pages have the correct fonts and styles applied.

```tsx title="layout.tsx" showLineNumbers
<html lang="en" className={`dark ${geistSans.variable} ${geistMono.variable}`}>
  <body className="prose-ui antialiased">
    <div className="mx-auto max-w-3xl px-8">{children}</div>
  </body>
</html>
```

## Add Prose UI CSS styles

Next, go to your `src/app/globals.css` file and import Prose UI styles at the top:

```css title="globals.css"
@import "@prose-ui/styles/prose-ui.css";
@import "@prose-ui/styles/katex.min.css";
```

The `katex.min.css` import is required only if you use math formulas.

Optional step: if you want to override fonts in Prose UI, update the variables for the base, heading, and mono fonts in your `globals.css`. For more details on styling, refer to the [styling](/docs/styling) page.

```css title="globals.css"
:root {
  --p-font-family: var(--font-geist-sans);
  --p-font-family-heading: var(--font-geist-sans);
  --p-font-family-mono: var(--font-geist-mono);
}
```

## Add MDX content

Rename `src/app/page.tsx` to `src/app/page.mdx` and replace the content with your Markdown/MDX. For example:

```md title="page.mdx" showLineNumbers
# Hello, world!

The Viking landers, part of NASA's [Viking program](https://en.wikipedia.org/wiki/Viking_program), were the first U.S. missions to successfully land on Mars and transmit images and scientific data back to Earth in 1976.

<Frame align="center">
  <Image
    src="https://nssdc.gsfc.nasa.gov/image/spacecraft/viking_lander.jpg"
    alt="Viking lander"
  />
  <Caption>Viking lander</Caption>
</Frame>
```

That's it! Run `pnpm dev` and open your project in the browser.
